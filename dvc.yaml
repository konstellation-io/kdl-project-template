stages:
  prepare_data:
    cmd: python3 lab/processes/prepare_data/main.py
    deps:
      - lab/processes/prepare_data/main.py
      - lab/processes/prepare_data/cancer_data.py
      - lib/pytorch.py
    outs:
      - ${paths.dir_processed}
    always_changed: true

  train_standard_classifiers:
    cmd: python3 lab/processes/train_standard_classifiers/main.py
    deps:
      - lab/processes/train_standard_classifiers/main.py
      - lab/processes/train_standard_classifiers/classifiers.py
      - lib/viz.py
      - ${paths.dir_processed}
    outs:
      - ${paths.dir_artifacts_standard}
    params:
      - training.random_seed

  train_dnn_pytorch:
    cmd: python3 lab/processes/train_dnn_pytorch/main.py
    deps:
      - lab/processes/train_dnn_pytorch/main.py
      - lab/processes/train_dnn_pytorch/densenet.py
      - lib/pytorch.py
      - lib/viz.py
      - ${paths.dir_processed}
    params:
      - training.random_seed
      - training.batch_size
      - training.lr
      - training.epochs
    outs:
      - ${paths.dir_artifacts_dnn}
stages:
  prepare_data:
    cmd: python3 lab/processes/prepare_data/main.py
    deps:
      - lab/processes/prepare_data/main.py
      - lab/processes/prepare_data/cancer_data.py
      - lib/pytorch.py
    outs:
      - ${paths.dir_processed}
    always_changed: true

  train_standard_classifiers:
    cmd: python3 lab/processes/train_standard_classifiers/main.py
    deps:
      - lab/processes/train_standard_classifiers/main.py
      - lab/processes/train_standard_classifiers/classifiers.py
      - lib/viz.py
      - ${paths.dir_processed}
    outs:
      - ${paths.dir_artifacts_standard}
    params:
      - training.random_seed

  train_dnn_pytorch:
    cmd: python3 lab/processes/train_dnn_pytorch/main.py
    deps:
      - lab/processes/train_dnn_pytorch/main.py
      - lab/processes/train_dnn_pytorch/densenet.py
      - lib/pytorch.py
      - lib/viz.py
      - ${paths.dir_processed}
    params:
      - training.random_seed
      - training.batch_size
      - training.lr
      - training.epochs
    outs:
      - ${paths.dir_artifacts_dnn}
